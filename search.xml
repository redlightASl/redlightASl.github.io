<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>我的新博客</title>
    <url>/2021/11/13/%E6%88%91%E7%9A%84%E6%96%B0%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h1 id="搬家了！"><a href="#搬家了！" class="headerlink" title="搬家了！"></a>搬家了！</h1><p>准备逐步把博客写作从CSDN换到基于Github Pages和Hexo的自建站上（笑）</p>
<p>CSDN😅</p>
<p>顺便以后推广公众号恰烂钱（？）</p>
<p>总之，不定期更新</p>
<p>保障一个月两次的保底更新（大概）</p>
<p><strong>Hexo还没用熟</strong></p>
<p>支持Markdown和$\LaTeX$公式，至少比b乎那个好多了</p>
<p>以后应该会再多整点活</p>
<p>欢迎dalao们指出博文的问题，同时欢迎大家提供整活思路</p>
<h3 id="活跃平台"><a href="#活跃平台" class="headerlink" title="活跃平台"></a>活跃平台</h3><ul>
<li>Github：有空就上去看两眼，一般会及时回复</li>
<li>知乎：平常刷一刷，不看私信，可以加一波好友但是不要指望用它联系我</li>
<li>b站：日常在线娱乐平台，不看私信</li>
<li>邮箱：秒回！</li>
<li>QQ：日常水群，一般会及时回复</li>
<li>微信公众号：日常不看，大概一两个月会发一次公众号推送，以最近沙雕图和技术博文（搬运）为主</li>
<li>神秘网站：一个月可能会上去看一看，正经人谁看推啊（</li>
</ul>
<p>推荐使用QQ或邮箱<code>dddbbbdd@foxmail.com</code>联系我</p>
]]></content>
      <tags>
        <tag>测试</tag>
      </tags>
  </entry>
  <entry>
    <title>电路设计从入门到弃坑【集成运算放大器的构成】</title>
    <url>/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/</url>
    <content><![CDATA[<h1 id="电路设计从入门到弃坑7【集成运算放大器的构成】"><a href="#电路设计从入门到弃坑7【集成运算放大器的构成】" class="headerlink" title="电路设计从入门到弃坑7【集成运算放大器的构成】"></a>电路设计从入门到弃坑7【集成运算放大器的构成】</h1><p>在之前的运放简介部分，已经介绍过运算放大器的基本构成，这部分要结合电路原理推导来详细说明一下集成运放的构成</p>
<p>在开始之前我们先来看一个经典运放LM358的datasheet</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218204757164.png" alt="image-20211218204757164"></p>
<p>如右上角图片所示，LMx58家族有三种主要封装：比较大体积的PDIP-8、小体积的SOIC-8和不常见的Micro8，一般来说个人DIY最常用的就是DIP-8封装，而如果制作PCB的话还是应该选择体积较小相对性能更好的SOIC-8</p>
<p>左侧介绍也已经说了：LM358是LM324这个四路运放芯片的一半，也就是双运放IC，它们都属于<strong>通用运放</strong>，运放是分为各种特化类型的，相关内容会在之后介绍。</p>
<span id="more"></span>

<p>它们的供电电压很宽：3V最低32V最高，同时还能使用负电源</p>
<p>右下角部分就是它的封装图了，内部包含两个输入输出独立的运放模块，而它们共用一套供电</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205243270.png" alt="image-20211218205243270"></p>
<p>下面这部分简要介绍了IC的性能，基本上现代的运放都得标配这些</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205404100.png" alt="image-20211218205404100"></p>
<p>可以看到它支持两套供电方式：单电源或双电源，注意之前说的宽供电电压在双电源使用的情况下就会变成标定的1/2</p>
<p>下面是我们的重点：内部电路图</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205520690.png" alt="image-20211218205520690"></p>
<p>看起来很复杂，但是不要慌，我们接下来就要把这个电路图分成四个基本部分，用上一部分说过的结构去分析它</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205617637.png" alt="image-20211218205617637"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205628299.png" alt="image-20211218205628299"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205643204.png" alt="image-20211218205643204"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205657393.png" alt="image-20211218205657393"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205725260.png" alt="image-20211218205725260"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205740855.png" alt="image-20211218205740855"></p>
<p>这一部分都是对运放性能的阐述，这部分内容会放到下一篇博文的应用部分去仔细说明</p>
<p>后面的datasheet还附上了典型应用（typical application），同样会放到下一篇博文说明</p>
<h2 id="集成运放概念复习"><a href="#集成运放概念复习" class="headerlink" title="集成运放概念复习"></a>集成运放概念复习</h2><p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218211302448.png" alt="image-20211218211302448"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218211607209.png" alt="image-20211218211607209"></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218211617653.png" alt="image-20211218211617653"></p>
<p>理想运放是一套双输入单输出的差分放大器，共模和差模输入电阻都为无穷大，输出电阻为0，差模电压放大倍数为正无穷大，共模电压放大倍数为0，通频带也为无穷大；实际运放已经能够近似成理想运放，所以之后的推导都会以理想运放模型为基础，只有在需要修正的时候才加以补充</p>
<h2 id="输入级、放大级和偏置电路"><a href="#输入级、放大级和偏置电路" class="headerlink" title="输入级、放大级和偏置电路"></a>输入级、放大级和偏置电路</h2><p>输入级就是应用长尾式差分放大电路，放大级就是应用一套级连或者使用达林顿管的共射放大电路，而偏置电路使用的镜像电流源在上一篇中已经讲过，这里不再赘述</p>
<p>这里主要结合之前的知识对上面的LM358内部电路进行一下分级</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218205520690.png" alt="image-20211218205520690"></p>
<p>先看最右边，这个电路是两套运放的共同偏置电路，负责提供一个总偏置电位，电流通过Q23的e极节点输出到Q1，进而调节左侧Q15的输出电流。</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218212841640.png" alt="image-20211218212841640"></p>
<p>Q15、Q16和Q19是主要的偏置电流提供管，同时Q15还具有为输出极提供推挽电流的作用</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218213150441.png" alt="image-20211218213150441"></p>
<p>再来看输入级这边的一坨管子</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218213244102.png" alt="image-20211218213244102"></p>
<p>可以很明显地发现Q17、Q18、Q21、Q20共同构成一套改良的差分放大器作为输入级，同时长尾端所需电流源由Q3、Q4实现，它们所需的电流供能和偏置都来自Q19，Q2、Q5则起到反馈作用，这两个管子先按下不表。再来看右下角的一堆</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218213537671.png" alt="image-20211218213537671"></p>
<p>它们都纠缠在一起，看起来不好拆解，于是按节点找到周围的管子</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218213646290.png" alt="image-20211218213646290"></p>
<p>发现右边的Q8、Q10是一个镜像源，Q10的c极又被直接拉到输出端，Q8的镜像输入则来自Q7b极；Q6、Q26的偏置都来自电流源Q16，它们似乎组成了一对推挽输出极，输出在Q9放大后推给了Q11，看似放大级的构造但是分析不出什么，那我们再来看看上一级差分放大电路的输出具体到了哪里</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218214052598.png" alt="image-20211218214052598"></p>
<p>它通过一个5pF电容耦合到了Q12的c极和Q9的c极，这就很明显了：右下角一坨电路并不是放大级：其中的Q6、Q7、Q26、Q8都是为Q9提供信号的，它们把来自Q5的信号变换为反相后，由Q9输出一个拉电流，这样就能实现对信号负半周的放大了。这里电路的主要作用是通过反馈消除信号的失真并增宽通频带</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218215328338.png" alt="image-20211218215328338"></p>
<p>真正的放大级由Q14、Q9共同组成，Q14是一个射随器，输出电流被送到Q13上通过40k电阻转化成电压信号驱动Q13；而Q9的拉电流负责驱动Q11；Q11、Q12是典型的推挽输出级，也就是驱动级（后面会详细讲），它可以提供很大的输出电流；这个输出电流又被25欧电阻采样为电压信号反馈给Q14和Q9，从而稳定输出，消除交越失真</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218215822371.png" alt="image-20211218215822371"></p>
<p>最后说会Q2、Q5两个电阻，这两个电阻主要构成了运放的保护回路——当电流过大时，两管会直接导通以卸掉电流源电路的额外功率，Q5还会通过Q6、Q7等反馈机制把后续的输出稳定下来</p>
<blockquote>
<p>以上内容全部为个人理解，很多内容有错漏见谅，恳请各位批评指正</p>
<p>网上对于这种通用运放的分析太少了……只能自己胡诌（</p>
</blockquote>
<p>分析电路的基本方法如下：</p>
<ul>
<li><strong>了解用途</strong>：了解要分析的电路的应用场合、用途和技术指标</li>
<li><strong>拆解电路</strong>：将整个电路图分为各自具有一定功能的基本电路，按信号流通顺序或反馈回路顺序或功能模块顺序依次分析各个子电路</li>
<li><strong>分析功能</strong>：定性分析每个子电路的基本功能和性能，如果分析不通应该从输出端的反馈回路看回来</li>
<li><strong>统观整体</strong>：从模块分布确定电路相互连接关系以及连接后电路实现的功能和性能，分析整个电路的性能特点</li>
<li><strong>定量计算</strong>：对于含有电容、电阻等元件的电路，一定仔细看好参数，通过计算或估算或计算机仿真确定其作用和电路参数</li>
</ul>
<h2 id="驱动级"><a href="#驱动级" class="headerlink" title="驱动级"></a>驱动级</h2><p>驱动级通常使用一套功率放大器拓扑，因为集成运放的主要使用目的是放大模拟信号而不是进行功率输出，所以一般都会简单使用消除了交越失真的OCL电路，详细内容可以参考后面的功率放大电路部分，这里仅做简要介绍</p>
<p>一般使用下面的这个结构组成推挽输出级</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211219160149001.png" alt="image-20211219160149001"></p>
<p>这个拓扑称为消除交越失真的准互补<strong>OCL电路</strong>，左侧两个二极管利用它们的管压降，配合上面的R6来消除后面三极管的<strong>交越失真</strong></p>
<blockquote>
<p>交越失真是在输入信号发生正半周-负半周交替的时候，由于电压没有达到晶体管门限电压，负责放大的晶体管并不导通，在对应部分出现输出电压为0的特殊情况</p>
<p>通过让晶体管处于放大区和截止区之间的临界状态或让晶体管提前/延后导通可以消除交越失真</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211219160417012.png" alt="image-20211219160417012"></p>
<p>上面的波形描述的就是交越失真了</p>
<p>这里用的方法就是让两个二极管-0.7V的电势差和三极管be结+0.7V的电势差相互抵消，于是就能让三极管上管提前导通，下管延后导通，从而消除交越失真</p>
</blockquote>
<p>两个NPN-PNP管e极接到一起，NPN管c极接正电源，PNP管c极接负电源，两者b极接到同一个信号输入，这就构成了图腾柱放置，也就是所谓的<strong>推挽输出</strong>。其中NPN管称为<strong>上管</strong>；PNP管称为<strong>下管</strong>，正半轴时NPN管导通，负半周时PNP管导通，这样就能放大整个波形了</p>
<p>不过这种交替导通并消除交越失真的电路会导致晶体管一直工作在放大状态，发热严重效率相对低。这种电路称为<em>甲乙类功放</em>电路</p>
<p>后面的内容中会仔细讲解功率放大电路，这里就先理解这部分电路是为了运放能够获得<strong>低输出电阻</strong>、<strong>大电流输出能力</strong>和<strong>宽通频带</strong>就可以了</p>
<h2 id="集成运放分类"><a href="#集成运放分类" class="headerlink" title="集成运放分类"></a>集成运放分类</h2><p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90%E3%80%91/image-20211218222235883.png" alt="image-20211218222235883"></p>
<blockquote>
<p>偷懒放了老师ppt截图，基本分类就是这样——上面这些东西都比较理论，实际上知道每个概念都在讲什么就好</p>
</blockquote>
<p>如果按照性能指标分，就有以下几种主要类型</p>
<ul>
<li><strong>高阻型</strong>：输入电阻很大，可高于10^12Ω，一般用于<strong>仪表放大器</strong>的输入级</li>
<li><strong>高速型</strong>：高频截止频率高，通频带宽会相对窄一些，但是SR很高，可达1000V/μs，用于各种高速设备（ADC/DAC等）</li>
<li><strong>高精度型</strong>：优化失调、温漂抑制、噪声特性，可以达到100dB以上的开环差模放大倍数</li>
<li><strong>低功耗型</strong>：优化静态功耗和动态功耗，一般用于低功耗设备</li>
<li><strong>大功率型</strong>：一般会被做成功放IC的形式，但本质上也是个运放，但是会牺牲开环放大倍数</li>
<li><strong>仪表放大器</strong>：由多个运放构成的复合电路，放大倍数极大、失真度极低</li>
<li><strong>隔离运放</strong>：输入输出-供电端不共地，实现隔离</li>
<li><strong>缓冲放大器</strong>：又称为缓冲门，常用于数字电路或高频模拟电路，一般用高速的三极管或MOS管实现，用于两级电路之间耦合，高输入电阻、低输出电阻、高通频带和几乎为1的放大倍数</li>
</ul>
]]></content>
      <tags>
        <tag>电路设计</tag>
      </tags>
  </entry>
  <entry>
    <title>电路设计从入门到弃坑【集成运算放大器简介】</title>
    <url>/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/</url>
    <content><![CDATA[<h1 id="电路设计从入门到弃坑6【集成运算放大器简介】"><a href="#电路设计从入门到弃坑6【集成运算放大器简介】" class="headerlink" title="电路设计从入门到弃坑6【集成运算放大器简介】"></a>电路设计从入门到弃坑6【集成运算放大器简介】</h1><p>集成电路是以半导体单晶硅为芯片，采用专门的制造工艺，把晶体管、场效应管、二极管、电阻和电容等元件及其之间连线组成的完整电路制作在一起，使之具有特定功能的电路技术</p>
<span id="more"></span>

<p>集成运放是一种典型的模拟集成电路，集成运放具有以下基本特征：</p>
<ul>
<li>级间直接耦合</li>
<li>能够方便制造对管（一致性良好的对偶晶体管），因此广泛采用差分放大电路和电流源电路</li>
<li>能够方便地实现复杂电路，使得性能良好</li>
<li>使用有源元件来替代难以集成的无源器件，甚至会使用大量晶体管替代电阻、电容</li>
<li>多采用复合管工艺</li>
</ul>
<p><strong>实际集成运放的性能非常高</strong>，以至于常常可以近似为理想运放，分析外特征和电气特性时也常常使用理想运放模型进行等效</p>
<p>理想运放即理想运算放大器，就是将集成运放的各项技术指标理想化得到的电路模型，具有以下指标：</p>
<ul>
<li>开环差模电压增益$A_{od}=\infty$</li>
<li>差模输入电阻$r_{id}=\infty$</li>
<li>共模抑制比$A_{od}=\infty$</li>
<li>输出电阻$r_O=0$</li>
<li>输入失调电压、电流、零漂均为0</li>
</ul>
<p>一言以蔽之，<em>输入电阻无穷、输出电阻为0、开环电压放大倍数正无穷、共模抑制比正无穷的差分放大器</em></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211125141004634.png" alt="image-20211125141004634"></p>
<p>可以推导出它的重要特征：</p>
<ul>
<li>伏安特性是阶跃函数，i&lt;0时输出$-U_{OM}$，i&gt;0时输出$+U_{OM}$，在i=0时发生跃变</li>
<li>虚短：两输入端电势相等</li>
<li>虚断：两输入端节点流向运放输入端的电流为0</li>
</ul>
<p>上面三个结论会在后面的运放应用部分详细梳理，这里请先当作背景知识记一下</p>
<p>实际的集成运放还是和理想运放有些区别。</p>
<p>一个是它的工作区域分为线性区和非线性区，实际运放的放大倍数无法达到正无穷，因此它的非线性区<em>相对</em>较宽</p>
<blockquote>
<p>实际通用运放的$A_{od}$能够达到几十万倍，因此是“相对较宽”</p>
<p>这也导致集成运放工作在线性区时的最大输入电压$u_P-u_N$值仅为<strong>uV</strong>级别，需要使用反馈机制才能让它工作在线性区</p>
</blockquote>
<p>本篇的重点在于集成运放的内部结构，一个典型运放的结构框图如下所示：</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211125141212297.png" alt="image-20211125141212297"></p>
<p>其中，</p>
<ul>
<li>偏置电路：为各级放大电路设置合适的静态工作点。采用<strong>电流源电路</strong>（电流镜）构造，为晶体管<strong>提供偏置电流</strong></li>
<li>输入级：又称前置级，多采用差分放大电路。要求<strong>输入电阻</strong>Ri<strong>大</strong>，<strong>差模放大倍数</strong>Ad<strong>大</strong>， <strong>共模放大倍数</strong>Ac<strong>小</strong>，<strong>输入端耐压高</strong>。</li>
<li>中间级：又称主放大级，多采用共射放大电路。要求<strong>有足够的放大能力</strong>。</li>
<li>输出级：又称功率级，多采用准互补输出放大电路。要求<strong>输出电阻</strong>Ro<strong>小</strong>，<strong>最大不失真输出电压</strong>Uom尽可能大。</li>
</ul>
<p>下面来单独讨论各级结构</p>
<h2 id="输入级"><a href="#输入级" class="headerlink" title="输入级"></a>输入级</h2><p><strong>输入级常常</strong>（一定会）<strong>使用差分放大电路拓扑</strong>，目的有三个：</p>
<ul>
<li>抑制共模信号，<strong>防止零漂</strong></li>
<li>提高差模放大倍数，<strong>增大输入电阻</strong></li>
<li>使用高压对管，增大耐压</li>
</ul>
<p>对运放输入级来说，最重要的性能指标就是很大的输入电阻和高共模抑制比</p>
<p>因此运放中常常使用差分放大电路，并构造一个“长尾”电流源来抑制零漂。具体内容会在下一篇中谈到</p>
<h2 id="电流源电路"><a href="#电流源电路" class="headerlink" title="电流源电路"></a>电流源电路</h2><p>电流源电路组成了运放总体的供能系统，可以说运放的所有电路都离不开电流源电路</p>
<p>一般使用三极管或MOS管组成<strong>镜像电流源电路</strong>（也称为电流镜），如下图所示</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211206222059135.png" alt="image-20211206222059135"></p>
<p>其中有$I_R=(V_{CC}-U_{BE})/R$，因为两个三极管对称，在三极管参数一定时左右分得电流相等，可以推出$I_R=I_C+\frac{2I_C}{\beta}$</p>
<p>经过变换可以推导出<br>$$<br>I_C=\frac{\beta}{\beta+2}I_R<br>$$<br>也就是说当$\beta&gt;&gt;2$时，总有$I_C\approx I_R$，并且不受其他因素干扰</p>
<p><strong>通过设置Vcc和IR的值就可以确定对管的c极电流，从而让处于c极这一支路上所有串联元件电流相等</strong></p>
<blockquote>
<p>考虑厄利尔电压时，c极电流要加入修正项；同时考虑c-e电压产生的c极电流变化，可确定如下公式<br>$$<br>I_C=I_S(e^{\frac{V_{BE}}{V_T}}-1)(1+\frac{V_{CE}}{V_A})\newline<br>\frac{I_{C1}}{I_{C0}}=\frac{1+\frac{V_{CE1}}{V_A}}{1+\frac{V_{CE0}}{V_A}}<br>$$<br>可以发现这个电路得交流小信号模型中诺顿等效电压<br>$$<br>V_{Th}=I_OR_o=I_{C1}\frac{V_A}{I_{C0}}=V_A<br>$$<br>则如果电流源输出为开路，会有$-V_A$这么强的电压出现在晶体管T0两端，很危险；但事实上不会发生这种情况，因为电流源两端电压达到0时晶体管会进入饱和态，上面的公式失效</p>
<p>需要额外注意，在集成电路中，使用超过MΩ级的电阻是很消耗硅片面积的，如果可能，尽量不要使用大电阻来获得某个值的电流，而应该换用电路拓扑，比如使用、<strong>改进型的基本电流源</strong>、<strong>Widlar电流源（微电流源）</strong>、<strong>威尔逊电流源</strong>、或者使用特殊制造工艺的<strong>多重电流源</strong></p>
</blockquote>
<p>当要求提供很小的静态电流，但无法使用大电阻时，可以采用<strong>微电流源</strong>拓扑作为替代方案</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208100523942.png" alt="image-20211208100523942"></p>
<p>它仅在T1的e极加入了一个反馈电阻，可以获得以下方程<br>$$<br>U_{BE0}-U_{BE1}=U_T ln(\frac{I_{E0}}{I_{E1}})=I_{E1}R_e<br>$$<br>于是可得$I_{E0}\approx I_{C0}\approx I_R=\frac{V_{CC}-U_{BE0}}{R}$</p>
<p>设计过程中首先要确定$I_{E0}$和$I_{C0}$，然后选定R和$R_e$</p>
<blockquote>
<p>电路中的电阻甚至也可以用一对电流源替换，这样能大大减少使用的电阻，晶体管工作在并联模式，电路的输出电阻<br>$$<br>r_{replace}=(1+\beta)r_{o2}<br>$$</p>
</blockquote>
<p>电流源电路可以通过并联来扩展，如下图所示的<strong>多路电流源</strong>就是用一个三极管作为镜像源，同时提供三路输出</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208093347348.png" alt="image-20211208093347348"></p>
<p>这个电路需要根据每一路需要的静态电流来选取$R_{e_n}$的值，恒有以下方程<br>$$<br>U_{BEn}+I_{Rn}R_{en}=U_{BE0}+I_{Rm}R_{e0}<br>$$<br>任意两路的be结电压和电阻分压之和都相等$U_{BEn} \approx U_{BE0}$，在晶体管管型一样的情况下，可以得到<br>$$<br>I_{Rn}R_{en}=I_{R0}R_{e0}<br>$$<br>选取合适的Re即可在镜像源能提供电流的范围内得到任意恒定电流</p>
<p>在集成电路中，可以很方便地在三极管上制造多个集电极，于是就可以制造出这样的电路：</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208093918020.png" alt="image-20211208093918020"></p>
<p>它和这个电路等效：<img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208093952095.png" alt="image-20211208093952095"></p>
<p>三个集电区面积为$S_0、S_1、S_2$，则有<br>$$<br>\frac{I_{C1}}{I_{C0}}=\frac{S_1}{S_0} \newline<br>\frac{I_{C2}}{I_{C0}}=\frac{S_2}{S_0}<br>$$<br>所以常常通过这个结构利用c结面积变化来实现不同的恒定电流</p>
<blockquote>
<p>简单介绍一下一些改进型的电流源</p>
<p><strong>改进型基本电流源</strong>是在电流源镜像b极和镜像源三极管c极之间加入一个额外的三极管，可以把它较做加射极输出器的电流源</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208101302199.png" alt="image-20211208101302199"></p>
<p>参考电流$I_R=\frac{V_{CC}-V_{BE1}-V_{BE3}}{R_1}$，输出电流$I_O=I_{C2}=\frac{I_R}{1+2(\beta^2+\beta_F)}$</p>
<p>这个电流源的最大特点就是通过引入反馈晶体管减少输出电流对晶体管参数的依赖性，两个晶体管参数不完全一致也可以得到相对高精度的电流源输出</p>
<p><strong>威尔逊电流源</strong>常常用于提供高输出电阻的高精度电流输出，广泛应用在各种集成运放内部</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208102013338.png" alt="image-20211208102013338"></p>
<p>这个电路可以看作在有源负载电路基础上改进而来，<strong>有源负载电路</strong>就是把基本镜像电流源中的NPN管换成PNP管，这样就实现了灌电流输出，对外可以看成一个吸收电流的网络，可以提供一个恒定的吸收电流。威尔逊电流源在有源负载输出端加入一个调整管，可以让$I_{C2}$高度稳定，只要三个PNP管的特性近似，就可以达到较高的输出精度<br>$$<br>I_{C2}=(1-\frac{2}{\beta^2+2\beta+2})I_R\approx I_R<br>$$<br>当β很大或很小时，都可以认为$I_{C2}\approx I_R$</p>
</blockquote>
<p>MOSFET同样可以构成电流源，显而易见可以通过类似的构造，<strong>通过修改MOSFET沟道尺寸来实现各种不同的输出电流</strong></p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211218221605156.png" alt="image-20211218221605156"></p>
<p>沟道长宽比S=W/L，则$\frac{I_{Dn}}{I_{D0}}=\frac{S_n}{S_0}$</p>
<h2 id="放大级"><a href="#放大级" class="headerlink" title="放大级"></a>放大级</h2><p>运放中常使用的放大级电路一般是共射放大电路，可以提供很高的放大倍数</p>
<p>针对高频、高精度、低温漂等特性设计的专用运放也会使用共基放大电路</p>
<p>这一部分电路实际上已经在之前的三极管放大电路部分介绍过，不再赘述</p>
<h2 id="直接耦合互补输出"><a href="#直接耦合互补输出" class="headerlink" title="直接耦合互补输出"></a>直接耦合互补输出</h2><p>互补输出级是直接耦合的功率放大电路，基本要求有：</p>
<ul>
<li>带载能力强：必须有足够的驱动能力，为外界负载提供大电流，自身压降也要低</li>
<li>直流功耗小：静态工作电流小，自身损耗低</li>
<li>负载电阻上无直流功耗：不存在零漂</li>
<li>最大不失真输出电压大：双电源供电时$U_{OM}$接近电源电压；单电源供电时也要接近1/2的电源电压</li>
</ul>
<p>最常用的电路拓扑就是<strong>推挽输出</strong>的OCL电路</p>
<p>详细内容将在之后介绍</p>
<h2 id="集成运放的基本应用"><a href="#集成运放的基本应用" class="headerlink" title="集成运放的基本应用"></a>集成运放的基本应用</h2><p>从集成运放开始，模拟电路就进入了“宏观”应用，在此之前的内容都是模拟电路的底层基础（也包括之后要提的集成运放内部结构）；而此后的内容将会和信号与系统紧密结合——通过集成运放对模拟信号进行控制和变换</p>
<h3 id="电压传输特性"><a href="#电压传输特性" class="headerlink" title="电压传输特性"></a>电压传输特性</h3><p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211208104828069.png" alt="image-20211208104828069"></p>
<p>上图就是经典的集成运放电压传输特性：两个非线性区，一个很窄的线性区</p>
<p>理想运放的电压传输特性可以近似为一个阶跃函数</p>
<p>对于运放的宏观应用，突出三个重点</p>
<ul>
<li>反馈：需要使用反馈来让运放保持在线性区</li>
<li>虚短、虚断：两输入端电位相等、流入电流为0</li>
<li>非线性：利用运放的非线性工作状态搭建数字电路</li>
</ul>
<h3 id="运算电路"><a href="#运算电路" class="headerlink" title="运算电路"></a>运算电路</h3><p>运算电路的<strong>输出电压</strong>是<strong>输入电压</strong>某种运算的结果，也就是运算电路能实现关系式$u_o=f(u_i)$</p>
<p>分析和设计过程中都需要依靠<strong>虚断</strong>和<strong>虚短</strong>特性作为出发点，配合基本的电路定律进行定量分析或通过信号与系统的角度进行定性分析</p>
<ol>
<li><p>比例运算电路（放大器）</p>
<ul>
<li><p>基本正相：$u_o=(1+\frac{R_f}{R})u_i$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222054256.png" alt="image-20211217222054256"></p>
</li>
<li><p>电压跟随器：$u_o=u_i$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222102538.png" alt="image-20211217222102538"></p>
</li>
<li><p>基本反相：$u_o=-\frac{R_f}{R}u_i$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222040850.png" alt="image-20211217222040850"></p>
</li>
<li><p>T型反馈网络：$u_o=-\frac{R_2+R_4}{R_1}(1+\frac{R_2//R_4}{R_3})u_i$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222048650.png" alt="image-20211217222048650"></p>
</li>
</ul>
</li>
<li><p>模拟加法电路</p>
<ul>
<li><p>反相求和：$u_o=-R_f(\sum_{k}^{n} \frac{R_{ik}}{R_k})$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222111715.png" alt="image-20211217222111715"></p>
</li>
<li><p>同相求和：$u_o=R_f(\sum_{k}^{n} \frac{R_{ik}}{R_k})$</p>
<p>  <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222122066.png" alt="image-20211217222122066"></p>
</li>
</ul>
</li>
<li><p>模拟减法电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222154460.png" alt="image-20211217222154460"></p>
<p> $u_o=\frac{R_f}{R}(u_{i2}-u_{i1})$</p>
</li>
<li><p>模拟乘法电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222210182.png" alt="image-20211217222210182"></p>
<p> $u_o=\frac{R_c}{2U_TR_e}u_Xu_Y$</p>
<p> 用下列符号表示模拟乘法器</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222243344.png" alt="image-20211217222243344"></p>
<p> 延伸出乘方电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222301017.png" alt="image-20211217222301017"></p>
</li>
<li><p>模拟除法电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222314122.png" alt="image-20211217222314122"></p>
<p> $u_o=-\frac{R_2}{R_1}\frac{u_{i1}}{ku_{i2}}$</p>
<p> 可延伸出开方电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222405899.png" alt="image-20211217222405899"></p>
<p> $u_o=\sqrt{-\frac{R_2}{kR_1}u_i}$</p>
</li>
<li><p>积分电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222140513.png" alt="image-20211217222140513"></p>
<p> $u_o=-\frac{1}{RC}\int_{t_1}^{t_2}u_i dt +u_o(t_1)$</p>
<p> 若u1再t1~t2为常量，则$u_o=-\frac{1}{RC}u_i(t_2-t_1) +u_o(t_1)$</p>
</li>
<li><p>微分电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217222146286.png" alt="image-20211217222146286"></p>
<p> $u_o=-RC\frac{du_i}{dt}$</p>
</li>
<li><p>对数电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217221947716.png" alt="image-20211217221947716"></p>
<p> $u_o=-U_T ln\frac{u_i}{I_S R}$</p>
</li>
<li><p>指数电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211217221958778.png" alt="image-20211217221958778"></p>
<p> $u_o=-I_SRe^{\frac{u_i}{U_T}}$</p>
</li>
</ol>
<h3 id="信号处理电路"><a href="#信号处理电路" class="headerlink" title="信号处理电路"></a>信号处理电路</h3><ol>
<li><p>信号生成器电路</p>
<p> 用于生成特定频率特定波形模拟信号的电路</p>
</li>
<li><p>有源滤波电路</p>
<p> 无源滤波电路的滤波参数随负载变化，而有源滤波电路中常常使用电压隔离器将滤波电路和负载隔离，这样就能让滤波参数不变，得到更大带宽；但是相应的有源滤波电路不是功率电路，输出电压电流大小受器件的参数和供电电源功率限制</p>
<ul>
<li>低通滤波器<strong>LPF</strong>：阻高频、通低频</li>
<li>高通滤波器<strong>HPF</strong>：阻低频、通高频</li>
<li>带通滤波器<strong>BPF</strong>：只允许特定频率信号通过</li>
<li>全通滤波器<strong>APF</strong>：实现频率-相位转换或相移的特殊滤波器</li>
<li>带阻滤波器<strong>BEF</strong>：只阻止特定频率信号</li>
</ul>
</li>
<li><p>有源负载电路</p>
<p> 用于模拟各性质负载的电路</p>
<p> <img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E9%9B%86%E6%88%90%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E7%AE%80%E4%BB%8B%E3%80%91/image-20211218221625965.png" alt="image-20211218221625965"></p>
<p> 本质上就是一个提供拉电流的镜像电流源只不过一般都会通过限制输出电阻来控制它的功率</p>
</li>
</ol>
]]></content>
      <tags>
        <tag>电路设计</tag>
      </tags>
  </entry>
  <entry>
    <title>电路设计从入门到弃坑【差分放大电路】</title>
    <url>/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E5%B7%AE%E5%88%86%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF%E3%80%91/</url>
    <content><![CDATA[<h1 id="电路设计从入门到弃坑5【差分放大电路】"><a href="#电路设计从入门到弃坑5【差分放大电路】" class="headerlink" title="电路设计从入门到弃坑5【差分放大电路】"></a>电路设计从入门到弃坑5【差分放大电路】</h1><p>之前的博文里介绍了基本放大电路的拓扑和分析方法，并且利用这些电路构造出多级放大电路；多级放大器可以解决大多数信号处理中产生的问题——但是很多晶体管本身的问题并不能通过组合放大器来解决，而且一般的放大器组合以后很可能还会导致一些新问题出现（比如交越失真），需要进一步改进。在放大器出现早期，由于当时技术缺陷，晶体管受温度影响非常大，面对这种情况，很多电路都会使用外电路补偿，而随着控制理论的发展，差分放大电路应运而生，很大程度上解决了晶体管受温度影响大的问题</p>
<span id="more"></span>

<h2 id="零点漂移"><a href="#零点漂移" class="headerlink" title="零点漂移"></a>零点漂移</h2><p><strong>零点漂移</strong>：放大电路中输入电压为0，但是输出电压不为0的现象</p>
<p>产生<strong>原因</strong>：</p>
<ul>
<li>温度变化</li>
<li>直流电源波动（偏置电流不稳定）</li>
<li>元器件老化</li>
</ul>
<p>主要原因是<strong>晶体管对温度敏感</strong>，因此零点漂移（零漂）也称为温度漂移（温漂）</p>
<p>克服温漂的方法：<strong>引入直流负反馈</strong>，<strong>温度补偿</strong>。</p>
<p>为了解决零点漂移的问题，人们构造了差分放大电路</p>
<h2 id="差分放大电路"><a href="#差分放大电路" class="headerlink" title="差分放大电路"></a>差分放大电路</h2><p>基本放大电路是这样的：</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E5%B7%AE%E5%88%86%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF%E3%80%91/image-20211126193536767.png" alt="image-20211126193536767"></p>
<p>信号从Rb输入三极管，而当发生零点漂移时，Rb相当于短路，而uo处相当于存在一个直流激励</p>
<p>自然可以想到在uo处加入一个电流源（或用电压源替代）来消除零点漂移，如下所示</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E5%B7%AE%E5%88%86%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF%E3%80%91/image-20211126193735965.png" alt="image-20211126193735965"></p>
<p>考虑到这个电压源要跟随三极管的性质变化而变化，显然无法实现，于是考虑从三极管本身的性质入手</p>
<p>假设存在一个和T完美对称的三极管，把它组成基本放大电路后接到uo的负极，于是就可以等效替代这个电压源了，如下图</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E5%B7%AE%E5%88%86%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF%E3%80%91/image-20211126193919573.png" alt="image-20211126193919573"></p>
<p>显而易见，Re1和Re2还可以用一个电阻Re=Re1//Re2来等效，于是我们就得到了教科书里面常见的<strong>差分放大电路拓扑</strong>，如下所示：</p>
<p><img src="/2021/12/21/%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BC%83%E5%9D%91%E3%80%90%E5%B7%AE%E5%88%86%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF%E3%80%91/image-20211126194055051.png" alt="image-20211126194055051"></p>
<p>其中两个三极管放大电路的参数抑制，因此外电路支路量也一致，并且<strong>等于其中一个三极管放大电路支路量的2倍</strong><br>$$<br>I_{BQ1}=I_{BQ2}=I_{BQ}\<br>$$<br>$$<br>I_{CQ1}=I_{CQ2}=\frac12 I_{C}\<br>$$</p>
<p>$$<br>I_{CQ1}=I_{CQ2}=\frac12 I_{C}\<br>$$</p>
<p>$$<br>I_{EQ1}=I_{EQ2}=\frac12 I_{E}\<br>$$</p>
<p>$$<br>U_{CQ1}=U_{CQ2}=U_{CQ}\<br>$$</p>
<p>$$<br>u_{OC}=U_{CQ1}-U_{CQ2}=0\<br>$$</p>
<p>其中Uoc指<em>共模信号</em>（见下文解释）</p>
<p>为了对这个电路放大的信号进行区分，定义两类信号</p>
<ul>
<li>共模信号Uc（Common）：大小相等、极性相同的信号</li>
<li>差模信号Ud（Difference）：大小相等、极性相反的信号</li>
</ul>
<p>需要注意，这里说的极性指的不只是信号的正负极，还可以理解成“信号导数的符号”</p>
<blockquote>
<p>当Ua、Ub具有相同增减性时（Ub增大，Ua也增大），二者就是一对共模信号；相反，当Ua、Ub增减性相反时，二者就被视为一对差模信号</p>
</blockquote>
<p>特别指出：共模信号如果大小不等，计算时一般使用两个信号的平均值$\frac{A+B}{2}$；差模信号则使用两个信号之差的平均$\frac{|A-B|}{2}$</p>
<p>直观上看，零点漂移就是与晶体管<strong>本身</strong>有关的共模信号。差分放大电路可以有效抑制这种共模信号，并将外加到Ui1、Ui2上的差模信号正常放大。</p>
<blockquote>
<p>这里的表述不严谨，相关等效推理请看下面的“反馈”介绍</p>
</blockquote>
<p>电路左侧Ui1称为同相输入端，右侧Ui2则是反相输入端——对于上面的基本差分放大电路，这个定义是可以左右互换的</p>
<p>另外有一个不引人注意的问题：差分放大电路需要引入<em>负电源</em>——为了放大完整的交流信号，这是必要的，并且负电源应该和正电源对称。当然这就使得差分放大电路的应用存在一定难度。不过在之后我们会介绍修复这个问题的方法</p>
<p><strong>这个电路只能工作在理想状态下</strong></p>
<blockquote>
<p>现实中没有两个一模一样的三极管，如果有，那就是测量精度不够高</p>
<p>在人类能造水滴之前，大概是没办法生产出这样的晶体管的（笑）</p>
</blockquote>
<p>但是根据这个电路，我们可以有效地克服零点漂移、抑制共模信号、放大差模信号</p>
<p>它可以作为实际差分放大电路的理想模型使用；而实际使用的差分放大电路就是根据它设计出来的。在介绍实际使用的差分放大电路之前，我们还应该仔细讨论一下<strong>长尾式差分放大电路</strong>的性质，并引入一些新概念</p>
<h2 id="长尾式差分放大电路"><a href="#长尾式差分放大电路" class="headerlink" title="长尾式差分放大电路"></a>长尾式差分放大电路</h2><blockquote>
<p>因为Re就像是一个长尾巴所以上面的基本差分放